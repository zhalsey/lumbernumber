<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Lumber Number 1.2</title>
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Lumber Number">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#2a2e35">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

:root {
  --steel-dark: #6b7280;
  --steel-mid: #8b95a3;
  --steel-light: #b0b8c4;
  --steel-highlight: #d1d5db;
  --chrome: linear-gradient(135deg, #a8a8a8 0%, #e0e0e0 50%, #a8a8a8 100%);
  --bezel: linear-gradient(180deg, #9ca3af 0%, #7a8188 100%);
  --lcd-bg: #2d3e2f;
  --lcd-text: #8aff8a;
  --lcd-glow: rgba(138, 255, 138, 0.3);
  --btn-bg: linear-gradient(180deg, #b8bfc6 0%, #9ca3af 100%);
  --btn-active: linear-gradient(180deg, #8b95a3 0%, #7a8188 100%);
  --orange: #ff6b35;
  --orange-glow: rgba(255, 107, 53, 0.4);
}

body {
  font-family: 'Share Tech Mono', monospace;
  background: linear-gradient(135deg, #7a8188 0%, #9ca3af 100%);
  height: 100vh;
  height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0;
  color: #fff;
  overflow: hidden;
  position: fixed;
  width: 100%;
  top: 0;
  left: 0;
}

.calculator-body {
  max-width: 420px;
  width: calc(100% - 20px);
  max-height: calc(100vh - 20px);
  max-height: calc(100dvh - 20px);
  overflow-y: auto;
  background: var(--bezel);
  border-radius: 16px;
  padding: 20px 18px 22px;
  box-shadow: 
    0 8px 32px rgba(0,0,0,0.4),
    0 2px 8px rgba(0,0,0,0.2),
    inset 0 2px 4px rgba(255,255,255,0.3),
    inset 0 -2px 8px rgba(0,0,0,0.3);
  position: relative;
  animation: slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.calculator-body::before {
  content: '';
  position: absolute;
  top: 8px;
  left: 8px;
  right: 8px;
  height: 3px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(255,255,255,0.6) 30%, 
    rgba(255,255,255,0.8) 50%, 
    rgba(255,255,255,0.6) 70%, 
    transparent 100%);
  border-radius: 2px;
}

.brand {
  font-family: 'Orbitron', sans-serif;
  font-weight: 900;
  font-size: 14px;
  letter-spacing: 2px;
  text-align: center;
  margin-bottom: 4px;
  color: #1f2937;
  text-shadow: 0 1px 0 rgba(255,255,255,0.8);
  text-transform: uppercase;
  line-height: 1.3;
}

.tagline {
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  font-size: 8px;
  letter-spacing: 1px;
  text-align: center;
  margin-bottom: 14px;
  color: #1f2937;
  text-shadow: 0 1px 0 rgba(255,255,255,0.3);
  text-transform: uppercase;
}

.mode-selector {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
  margin-bottom: 14px;
  background: rgba(0,0,0,0.3);
  padding: 5px;
  border-radius: 8px;
}

.mode-btn {
  flex: 1;
  padding: 9px 4px;
  min-height: 42px;
  background: var(--btn-bg);
  border: 1px solid rgba(255,255,255,0.3);
  border-radius: 6px;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  font-size: 8px;
  letter-spacing: 0.2px;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    0 2px 4px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.4);
  text-transform: uppercase;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  position: relative;
}

.mode-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, transparent 70%);
  border-radius: 6px;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  pointer-events: none;
}

.mode-btn:active::before {
  opacity: 1;
  transition: opacity 0.05s ease-out;
}

.mode-btn:active {
  transform: translateY(1px) scale(0.98);
  box-shadow: 
    0 1px 2px rgba(0,0,0,0.4),
    inset 0 1px 3px rgba(0,0,0,0.4);
}

.mode-btn.active {
  background: var(--orange);
  color: #fff;
  border-color: rgba(255,107,53,0.5);
  box-shadow: 
    0 0 12px var(--orange-glow),
    0 2px 4px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.2);
}

.mode-btn.active::before {
  background: radial-gradient(circle at center, rgba(255,255,255,0.3) 0%, transparent 70%);
}

.lcd-display {
  background: var(--lcd-bg);
  border: 3px solid var(--steel-dark);
  border-radius: 4px;
  padding: 14px;
  margin-bottom: 14px;
  box-shadow: 
    inset 0 2px 8px rgba(0,0,0,0.8),
    inset 0 0 40px rgba(0,0,0,0.3),
    0 1px 0 rgba(255,255,255,0.1);
  position: relative;
  overflow: hidden;
}

.lcd-display::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    rgba(138,255,138,0.03) 0px,
    transparent 1px,
    transparent 2px,
    rgba(138,255,138,0.03) 3px
  );
  pointer-events: none;
}

.lcd-label {
  font-size: 10px;
  color: rgba(138,255,138,0.7);
  margin-bottom: 6px;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  letter-spacing: 1px;
  text-transform: uppercase;
}

.lcd-value {
  font-family: 'Share Tech Mono', monospace;
  font-size: 32px;
  color: var(--lcd-text);
  text-align: right;
  text-shadow: 0 0 10px var(--lcd-glow);
  min-height: 38px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  letter-spacing: 1px;
  gap: 8px;
}

.lcd-value.large {
  font-size: 36px;
  font-weight: 700;
}

.lcd-unit {
  font-size: 16px;
  color: rgba(138, 255, 138, 0.8);
  font-weight: 400;
  letter-spacing: 0.5px;
}

.input-panel {
  display: none;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 14px;
}

.input-panel.active {
  display: flex;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.price-toggle-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 12px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 8px;
}

.toggle-label {
  font-size: 12px;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  color: #374151;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  letter-spacing: 0.5px;
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 56px;
  height: 28px;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--btn-bg);
  transition: 0.3s;
  border-radius: 28px;
  border: 2px solid rgba(0,0,0,0.2);
  box-shadow: 
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 1px 0 rgba(255,255,255,0.4);
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 2px;
  background: linear-gradient(180deg, #ffffff 0%, #e5e7eb 100%);
  transition: 0.3s;
  border-radius: 50%;
  box-shadow: 
    0 2px 4px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.8);
}

.toggle-switch input:checked + .toggle-slider {
  background: var(--btn-bg);
}

.toggle-switch input:checked + .toggle-slider:before {
  transform: translateX(26px);
}

.toggle-slider:active:before {
  width: 24px;
}

.sqft-presets {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  margin: 14px 0 12px 0;
}

.sqft-preset-btn {
  font-size: 8px !important;
  padding: 9px 4px !important;
}

.sqft-presets {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  margin: 14px 0 12px 0;
}

.sqft-preset-btn {
  font-size: 8px !important;
  padding: 9px 4px !important;
}

.sqft-pricing-section {
  margin-top: 16px;
  padding-top: 14px;
  border-top: 2px solid rgba(0,0,0,0.2);
}

.sqft-pricing-label {
  font-size: 9px;
  color: #1f2937;
  text-align: center;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  letter-spacing: 1px;
  margin-bottom: 10px;
  text-shadow: 0 1px 0 rgba(255,255,255,0.5);
  text-transform: uppercase;
}

.sqft-price-result {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: rgba(0,0,0,0.2);
  border-radius: 6px;
  margin-top: 10px;
}

.sqft-price-result-label {
  font-size: 10px;
  color: #1f2937;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  text-shadow: 0 1px 0 rgba(255,255,255,0.5);
}

.sqft-price-result-value {
  font-size: 16px;
  color: var(--orange);
  font-family: 'Share Tech Mono', monospace;
  font-weight: 700;
  text-shadow: 0 0 6px var(--orange-glow);
}

.m3-result-section {
  margin-top: 20px;
  padding: 16px;
  background: rgba(0,0,0,0.2);
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.05);
}

.m3-section-title {
  font-size: 9px;
  color: #1f2937;
  text-align: center;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  letter-spacing: 1px;
  margin-bottom: 12px;
  text-shadow: 0 1px 0 rgba(255,255,255,0.5);
  text-transform: uppercase;
}

.m3-result-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}

.m3-result-row:last-of-type {
  border-bottom: none;
}

.m3-result-label {
  font-size: 12px;
  color: #1f2937;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6);
  text-transform: uppercase;
}

.m3-result-value {
  font-size: 20px;
  color: var(--orange);
  font-family: 'Share Tech Mono', monospace;
  font-weight: 700;
  text-shadow: 0 0 6px var(--orange-glow);
}

.m3-exchange-rate {
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid rgba(255,255,255,0.1);
  font-size: 9px;
  color: rgba(255,255,255,0.5);
  font-family: 'Share Tech Mono', monospace;
  text-align: center;
}

.m3-rate-display {
  color: var(--lcd-text);
  font-weight: 700;
}

.m3-rate-updated {
  display: block;
  margin-top: 4px;
  font-size: 8px;
  color: rgba(255,255,255,0.3);
}

.input-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.input-label {
  font-size: 11px;
  color: #1f2937;
  flex: 1;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  text-shadow: 0 1px 0 rgba(255,255,255,0.6);
}

.input-field {
  flex: 0 0 120px;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 4px;
  padding: 8px 10px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 17px;
  color: var(--lcd-text);
  text-align: right;
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
}

.input-field:focus {
  outline: none;
  border-color: var(--orange);
  box-shadow: 
    inset 0 2px 4px rgba(0,0,0,0.5),
    0 0 8px var(--orange-glow);
}

.button-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}

.preset-btn {
  padding: 10px 6px !important;
  font-size: 10px !important;
}

.calc-btn {
  padding: 13px;
  min-height: 44px;
  background: var(--btn-bg);
  border: 1px solid rgba(255,255,255,0.4);
  border-radius: 8px;
  font-family: 'Orbitron', sans-serif;
  font-weight: 700;
  font-size: 11px;
  letter-spacing: 0.5px;
  color: #1f2937;
  cursor: pointer;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    0 3px 6px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.5),
    inset 0 -1px 0 rgba(0,0,0,0.15);
  text-transform: uppercase;
  position: relative;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.calc-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at center, rgba(255,255,255,0.3) 0%, transparent 70%);
  border-radius: 8px;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  pointer-events: none;
}

.calc-btn:active::before {
  opacity: 1;
  transition: opacity 0.05s ease-out;
}

.calc-btn:active {
  transform: translateY(2px) scale(0.98);
  box-shadow: 
    0 1px 3px rgba(0,0,0,0.4),
    inset 0 1px 4px rgba(0,0,0,0.3);
}

.calc-btn:hover {
  border-color: rgba(255,255,255,0.25);
}

.calc-btn.primary {
  background: linear-gradient(180deg, #ff8359 0%, var(--orange) 100%);
  color: #fff;
  border-color: rgba(255,107,53,0.5);
  box-shadow: 
    0 0 12px var(--orange-glow),
    0 3px 6px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.3);
}

.calc-btn.primary::before {
  background: radial-gradient(circle at center, rgba(255,255,255,0.5) 0%, transparent 70%);
}

.calc-btn.primary:active {
  box-shadow: 
    0 0 16px var(--orange-glow),
    0 1px 3px rgba(0,0,0,0.4),
    inset 0 1px 4px rgba(0,0,0,0.3);
  transform: translateY(2px) scale(0.98);
}

.result-section {
  background: rgba(0,0,0,0.2);
  border-radius: 8px;
  padding: 10px;
  margin-top: 12px;
  border: 1px solid rgba(255,255,255,0.05);
}

.result-label {
  font-size: 9px;
  color: rgba(255,255,255,0.4);
  margin-bottom: 8px;
  font-family: 'Orbitron', sans-serif;
  letter-spacing: 1px;
  text-transform: uppercase;
}

.result-value {
  font-size: 22px;
  color: var(--orange);
  text-align: right;
  font-family: 'Share Tech Mono', monospace;
  text-shadow: 0 0 10px var(--orange-glow);
  letter-spacing: 1px;
}

.footer {
  display: none;
}

@media (max-width: 380px) {
  .calculator-body {
    padding: 16px 18px 20px;
  }
  
  .lcd-display {
    padding: 12px;
    margin-bottom: 14px;
  }
  
  .input-panel {
    gap: 8px;
    margin-bottom: 14px;
  }
  
  .button-grid {
    gap: 8px;
  }
  
  .calc-btn {
    padding: 12px;
  }
}

@media (max-height: 500px) and (orientation: landscape) {
  body {
    padding: 10px;
  }
  
  .calculator-body {
    padding: 16px 18px 20px;
  }
  
  .lcd-display {
    padding: 12px;
    margin-bottom: 14px;
  }
  
  .input-panel {
    gap: 8px;
    margin-bottom: 14px;
  }
  
  .button-grid {
    gap: 8px;
  }
  
  .calc-btn {
    padding: 12px;
  }
}
</style>
<script>
  window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
</script>
<script defer src="/_vercel/insights/script.js"></script>
</head>
<body>

<div class="calculator-body">
  <div class="brand">Lumber Number 1.2</div>
  <div class="tagline">Lineal, Board, and Square Foot Conversion Calculator</div>
  
  <div class="mode-selector">
    <button class="mode-btn active" data-mode="lf-to-mbf">LF → MBF</button>
    <button class="mode-btn" data-mode="mbf-to-lf">MBF → LF</button>
    <button class="mode-btn" data-mode="pricing">LF & MBF Pricing</button>
    <button class="mode-btn" data-mode="sq-ft">SQ FT & MBF</button>
    <button class="mode-btn" data-mode="mbf-m3">MBF-M<sup>3</sup></button>
  </div>
  
  <div class="lcd-display">
    <div class="lcd-label" id="displayLabel">LINEAL FEET → MBF</div>
    <div class="lcd-value large" id="displayValue">
      <span id="displayNumber">0.000</span>
      <span class="lcd-unit" id="displayUnit">MBF</span>
    </div>
  </div>
  
  <!-- LF to MBF Panel -->
  <div class="input-panel active" id="panel-lf-to-mbf">
    <div class="input-row">
      <span class="input-label">Lineal Feet</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="lf-input" value="1000" step="0.01">
    </div>
    <div class="input-row">
      <span class="input-label">Thickness (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="lf-thick" value="1" step="0.01">
    </div>
    <div class="input-row">
      <span class="input-label">Width (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="lf-width" value="6" step="0.01">
    </div>
  </div>
  
  <!-- MBF to LF Panel -->
  <div class="input-panel" id="panel-mbf-to-lf">
    <div class="input-row">
      <span class="input-label">MBF</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="mbf-input" value="0.5" step="0.0001">
    </div>
    <div class="input-row">
      <span class="input-label">Thickness (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="mbf-thick" value="1" step="0.01">
    </div>
    <div class="input-row">
      <span class="input-label">Width (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="mbf-width" value="6" step="0.01">
    </div>
  </div>
  
  <!-- Square Feet Panel -->
  <div class="input-panel" id="panel-sq-ft">
    <div class="price-toggle-container">
      <span class="toggle-label">MBF</span>
      <label class="toggle-switch">
        <input type="checkbox" id="sqft-unit-toggle" checked>
        <span class="toggle-slider"></span>
      </label>
      <span class="toggle-label">SQ FT</span>
    </div>
    <div class="input-row">
      <span class="input-label" id="sqft-input-label">Square Feet</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="sqft-input" value="1000" step="0.01">
    </div>
    <div class="input-row">
      <span class="input-label">Net Face Width (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="sqft-face-width" value="3.25" step="0.001">
    </div>
    <div class="input-row">
      <span class="input-label">Nominal Width (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="sqft-nominal-width" value="4" step="0.01">
    </div>
    <div class="input-row">
      <span class="input-label">Thickness (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="sqft-thick" value="1" step="0.01">
    </div>
    
    <div class="sqft-presets">
      <button class="calc-btn preset-btn sqft-preset-btn" onclick="setSqFtPreset(2.25, 3)">2-1/4" (1x3)</button>
      <button class="calc-btn preset-btn sqft-preset-btn" onclick="setSqFtPreset(2.125, 3)">2-1/8" (1x3)</button>
      <button class="calc-btn preset-btn sqft-preset-btn" onclick="setSqFtPreset(3.25, 4)">3-1/4" (1x4)</button>
      <button class="calc-btn preset-btn sqft-preset-btn" onclick="setSqFtPreset(3.125, 4)">3-1/8" (1x4)</button>
      <button class="calc-btn preset-btn sqft-preset-btn" onclick="setSqFtPreset(5.125, 6)">5-1/8" (1x6)</button>
    </div>
    
    <div class="sqft-pricing-section">
      <div class="sqft-pricing-label">PRICING CONVERSION</div>
      <div class="price-toggle-container">
        <span class="toggle-label">$/MBF</span>
        <label class="toggle-switch">
          <input type="checkbox" id="sqft-price-toggle" checked>
          <span class="toggle-slider"></span>
        </label>
        <span class="toggle-label">$/SQ FT</span>
      </div>
      <div class="input-row">
        <span class="input-label" id="sqft-price-label">Price per SQ FT ($)</span>
        <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="sqft-price-input" value="4.31" step="0.0001">
      </div>
      <div class="sqft-price-result">
        <span class="sqft-price-result-label" id="sqft-price-result-label">$/MBF:</span>
        <span class="sqft-price-result-value" id="sqft-price-result-value">—</span>
      </div>
    </div>
  </div>
  
  <!-- Pricing Panel -->
  <div class="input-panel" id="panel-pricing">
    <div class="price-toggle-container">
      <span class="toggle-label">MBF</span>
      <label class="toggle-switch">
        <input type="checkbox" id="price-unit-toggle" checked>
        <span class="toggle-slider"></span>
      </label>
      <span class="toggle-label">LF</span>
    </div>
    <div class="input-row">
      <span class="input-label" id="price-input-label">Price per LF ($)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="price-input" value="1.50" step="0.0001">
    </div>
    <div class="input-row">
      <span class="input-label">Thickness (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="price-thick" value="1" step="0.01">
    </div>
    <div class="input-row">
      <span class="input-label">Width (in)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="price-width" value="6" step="0.01">
    </div>
  </div>
  
  <!-- MBF to M³ Panel -->
  <div class="input-panel" id="panel-mbf-m3">
    <div class="price-toggle-container">
      <span class="toggle-label">M<sup>3</sup></span>
      <label class="toggle-switch">
        <input type="checkbox" id="m3-unit-toggle" checked>
        <span class="toggle-slider"></span>
      </label>
      <span class="toggle-label">MBF</span>
    </div>
    <div class="input-row">
      <span class="input-label" id="m3-input-label">Price per MBF ($)</span>
      <input type="tel" inputmode="decimal" enterkeyhint="done" class="input-field" id="m3-price-input" value="3500" step="1">
    </div>
    
    <div class="m3-result-section">
      <div class="m3-section-title">ADDITIONAL INFO</div>
      <div class="m3-result-row">
        <span class="m3-result-label" id="m3-label-usd">Price per m³ (USD):</span>
        <span class="m3-result-value" id="m3-price-usd">—</span>
      </div>
      <div class="m3-result-row">
        <span class="m3-result-label" id="m3-label-eur">Price per m³ (EUR):</span>
        <span class="m3-result-value" id="m3-price-eur">—</span>
      </div>
      <div class="m3-exchange-rate">
        Exchange rate: <span class="m3-rate-display" id="m3-rate-display">Loading...</span>
        <span class="m3-rate-updated" id="m3-rate-time"></span>
      </div>
    </div>
  </div>
  
  <div class="button-grid">
    <button class="calc-btn preset-btn" onclick="setPreset(1, 4)">1×4</button>
    <button class="calc-btn preset-btn" onclick="setPreset(1, 6)">1×6</button>
    <button class="calc-btn preset-btn" onclick="setPreset(1, 8)">1×8</button>
    <button class="calc-btn preset-btn" onclick="setPreset(1, 10)">1×10</button>
    <button class="calc-btn preset-btn" onclick="setPreset(1, 12)">1×12</button>
    <button class="calc-btn preset-btn" onclick="setPreset(2, 4)">2×4</button>
    <button class="calc-btn preset-btn" onclick="setPreset(2, 6)">2×6</button>
    <button class="calc-btn preset-btn" onclick="setPreset(2, 8)">2×8</button>
    <button class="calc-btn preset-btn" onclick="setPreset(2, 10)">2×10</button>
    <button class="calc-btn preset-btn" onclick="setPreset(2, 12)">2×12</button>
  </div>
  
  <div class="result-section" id="resultSection" style="display: none;">
    <div class="result-label" id="resultLabel">RESULT</div>
    <div class="result-value" id="resultValue">—</div>
  </div>
</div>

<div class="footer">
  MBF = 1,000 Board Feet
</div>

<script>
const MBF_TO_M3 = 2.35973722; // 1 MBF = 2.3597 cubic meters
let usdToEurRate = 0.846; // Default, updated from API
let currentMode = 'lf-to-mbf';

// Mode switching
document.querySelectorAll('.mode-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    
    const previousMode = currentMode;
    currentMode = btn.dataset.mode;
    
    // Carry over thickness and width values when switching to pricing
    if (currentMode === 'pricing') {
      let sourceThick, sourceWidth;
      if (previousMode === 'lf-to-mbf') {
        sourceThick = document.getElementById('lf-thick').value;
        sourceWidth = document.getElementById('lf-width').value;
      } else if (previousMode === 'mbf-to-lf') {
        sourceThick = document.getElementById('mbf-thick').value;
        sourceWidth = document.getElementById('mbf-width').value;
      }
      if (sourceThick && sourceWidth) {
        document.getElementById('price-thick').value = sourceThick;
        document.getElementById('price-width').value = sourceWidth;
      }
    }
    // Carry pricing values back when switching from pricing
    else if (previousMode === 'pricing') {
      const priceThick = document.getElementById('price-thick').value;
      const priceWidth = document.getElementById('price-width').value;
      if (currentMode === 'lf-to-mbf') {
        document.getElementById('lf-thick').value = priceThick;
        document.getElementById('lf-width').value = priceWidth;
      } else if (currentMode === 'mbf-to-lf') {
        document.getElementById('mbf-thick').value = priceThick;
        document.getElementById('mbf-width').value = priceWidth;
      }
    }
    
    document.querySelectorAll('.input-panel').forEach(p => p.classList.remove('active'));
    document.getElementById(`panel-${currentMode}`).classList.add('active');
    
    // Show/hide appropriate preset buttons
    const mainButtonGrid = document.querySelector('.button-grid');
    if (currentMode === 'sq-ft' || currentMode === 'mbf-m3') {
      mainButtonGrid.style.display = 'none';
    } else {
      mainButtonGrid.style.display = 'grid';
    }
    
    // Hide LCD label for MBF-M³ mode
    const lcdLabel = document.getElementById('displayLabel');
    if (currentMode === 'mbf-m3') {
      lcdLabel.style.display = 'none';
    } else {
      lcdLabel.style.display = 'block';
    }
    
    // Update display label
    const labels = {
      'lf-to-mbf': 'LINEAL FEET → MBF',
      'mbf-to-lf': 'MBF → LINEAL FEET',
      'pricing': 'LF & MBF PRICING',
      'mbf-m3': 'MBF → CUBIC METER',
      'sq-ft': 'SQUARE FEET ↔ MBF'
    };
    document.getElementById('displayLabel').textContent = labels[currentMode];
    
    // Reset display
    document.getElementById('displayNumber').textContent = '0.000';
    document.getElementById('displayUnit').textContent = currentMode === 'lf-to-mbf' ? 'MBF' : 'LF';
    document.getElementById('resultSection').style.display = 'none';
    
    calculate();
  });
});

// Auto-calculate on input change
document.querySelectorAll('.input-field').forEach(input => {
  input.addEventListener('input', () => {
    calculate();
  });
  
  // Auto-select on focus so typing replaces value
  input.addEventListener('focus', function() {
    this.select();
  });
  
  // Also select on click (for iOS)
  input.addEventListener('click', function() {
    this.select();
  });
  
  // Handle enter key to close keyboard
  input.addEventListener('keypress', function(e) {
    if (e.key === 'Enter' || e.keyCode === 13) {
      this.blur();
      calculate();
    }
  });
});

// Price unit toggle listener
document.getElementById('price-unit-toggle').addEventListener('change', function() {
  const isLF = this.checked;
  const label = document.getElementById('price-input-label');
  label.textContent = isLF ? 'Price per LF ($)' : 'Price per MBF ($)';
  calculate();
});

// Square feet unit toggle
document.getElementById('sqft-unit-toggle').addEventListener('change', function() {
  const isSqFt = this.checked;
  document.getElementById('sqft-input-label').textContent = isSqFt ? 'Square Feet' : 'MBF';
  calculate();
});

// Square feet price toggle
document.getElementById('sqft-price-toggle').addEventListener('change', function() {
  const isSqFt = this.checked;
  document.getElementById('sqft-price-label').textContent = isSqFt ? 'Price per SQ FT ($)' : 'Price per MBF ($)';
  calculate();
});

// M³ unit toggle
document.getElementById('m3-unit-toggle').addEventListener('change', function() {
  const isMBF = this.checked;
  document.getElementById('m3-input-label').textContent = isMBF ? 'Price per MBF ($)' : 'Price per m³ (€)';
  calculate();
});

function setPreset(thickness, width) {
  const panels = ['lf', 'mbf', 'price'];
  panels.forEach(prefix => {
    const thickEl = document.getElementById(`${prefix}-thick`);
    const widthEl = document.getElementById(`${prefix}-width`);
    if (thickEl) thickEl.value = thickness;
    if (widthEl) widthEl.value = width;
  });
  calculate();
}

function setSqFtPreset(netFace, nominalWidth) {
  document.getElementById('sqft-face-width').value = netFace;
  document.getElementById('sqft-nominal-width').value = nominalWidth;
  document.getElementById('sqft-thick').value = 1;
  calculate();
}

// Exchange rate fetching for MBF-M³ conversion - Multiple sources for reliability
async function fetchExchangeRate() {
  // Try multiple APIs in order of preference - all CORS-enabled and browser-friendly
  const apis = [
    {
      name: 'fawazahmed0 (CDN)',
      url: 'https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json',
      parse: (data) => data.usd.eur
    },
    {
      name: 'exchangerate.host',
      url: 'https://api.exchangerate.host/latest?base=USD&symbols=EUR',
      parse: (data) => data.rates.EUR
    },
    {
      name: 'frankfurter.dev',
      url: 'https://api.frankfurter.dev/latest?from=USD&to=EUR',
      parse: (data) => data.rates.EUR
    }
  ];
  
  for (const api of apis) {
    try {
      console.log(`Trying ${api.name}...`);
      
      const response = await fetch(api.url, {
        method: 'GET',
        mode: 'cors',
        cache: 'no-cache'
      });
      
      if (!response.ok) {
        console.warn(`${api.name} returned status ${response.status}`);
        continue;
      }
      
      const data = await response.json();
      const rate = api.parse(data);
      
      console.log(`${api.name} returned rate:`, rate);
      
      if (rate && !isNaN(rate) && rate > 0.7 && rate < 1.2) {
        // Sanity check: EUR/USD should be between 0.7 and 1.2
        usdToEurRate = rate;
        
        // Cache in localStorage with timestamp
        localStorage.setItem('usdToEurRate', usdToEurRate.toString());
        localStorage.setItem('rateTimestamp', Date.now().toString());
        localStorage.setItem('rateSource', api.name);
        
        console.log(`✓ Exchange rate loaded from ${api.name}: ${rate}`);
        updateRateDisplay();
        calculateM3Pricing(); // Recalculate with new rate
        return; // Success - exit function
      } else {
        console.warn(`${api.name} returned invalid rate:`, rate);
      }
    } catch (error) {
      console.warn(`Failed to fetch from ${api.name}:`, error.message);
      continue; // Try next API
    }
  }
  
  // All APIs failed - use cached rate if available
  const cached = localStorage.getItem('usdToEurRate');
  const timestamp = localStorage.getItem('rateTimestamp');
  
  if (cached && !isNaN(parseFloat(cached))) {
    usdToEurRate = parseFloat(cached);
    const age = timestamp ? Date.now() - parseInt(timestamp) : null;
    const ageHours = age ? Math.floor(age / (1000 * 60 * 60)) : null;
    updateRateDisplay(`(cached ${ageHours}h ago)`);
    console.warn('Using cached exchange rate:', usdToEurRate);
  } else {
    // Last resort: Use conservative estimate
    usdToEurRate = 0.85; // Updated conservative estimate
    updateRateDisplay('(ESTIMATED - API unavailable)');
    console.error('All exchange rate APIs failed. Using estimate:', usdToEurRate);
  }
}

function updateRateDisplay(suffix = '') {
  const displayEl = document.getElementById('m3-rate-display');
  const timeEl = document.getElementById('m3-rate-time');
  
  if (displayEl) {
    displayEl.textContent = `1 USD = ${usdToEurRate.toFixed(4)} EUR ${suffix}`;
  }
  
  if (timeEl) {
    const timestamp = localStorage.getItem('rateTimestamp');
    const source = localStorage.getItem('rateSource');
    
    if (timestamp && !suffix.includes('ESTIMATED')) {
      const date = new Date(parseInt(timestamp));
      const timeStr = date.toLocaleString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        hour: '2-digit', 
        minute: '2-digit' 
      });
      timeEl.textContent = `Updated: ${timeStr}${source ? ' via ' + source : ''}`;
    } else if (suffix.includes('ESTIMATED')) {
      timeEl.textContent = '⚠️ Unable to fetch live rate - verify manually';
      timeEl.style.color = '#ff6b35'; // Orange warning color
    } else {
      timeEl.textContent = '';
    }
  }
}

function checkRateUpdate() {
  const cached = localStorage.getItem('usdToEurRate');
  const timestamp = localStorage.getItem('rateTimestamp');
  
  if (cached && timestamp) {
    const age = Date.now() - parseInt(timestamp);
    const twelveHours = 12 * 60 * 60 * 1000; // Check twice daily for accuracy
    
    if (age < twelveHours) {
      // Use cached rate (less than 12 hours old)
      usdToEurRate = parseFloat(cached);
      updateRateDisplay();
      return;
    }
  }
  
  // Fetch new rate (cache expired or doesn't exist)
  fetchExchangeRate();
}

function calculateM3Pricing() {
  const priceInput = parseFloat(document.getElementById('m3-price-input').value) || 0;
  const isMBF = document.getElementById('m3-unit-toggle').checked; // checked = MBF, unchecked = M³
  
  let priceM3USD, priceM3EUR;
  
  if (isMBF) {
    // Input is $/MBF → calculate $/m³ and €/m³
    const priceMBFUSD = priceInput;
    priceM3USD = priceInput / MBF_TO_M3;
    priceM3EUR = priceM3USD * usdToEurRate;
  } else {
    // Input is €/m³ → calculate $/m³
    priceM3EUR = priceInput;
    priceM3USD = priceInput / usdToEurRate;
  }
  
  const usdEl = document.getElementById('m3-price-usd');
  const eurEl = document.getElementById('m3-price-eur');
  
  if (usdEl) {
    usdEl.textContent = '$' + priceM3USD.toLocaleString('en-US', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });
  }
  
  if (eurEl) {
    eurEl.textContent = '€' + priceM3EUR.toLocaleString('en-US', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });
  }
}

function calculateSqFtPricing(coverageFactor) {
  const priceInput = parseFloat(document.getElementById('sqft-price-input').value) || 0;
  const isSqFt = document.getElementById('sqft-price-toggle').checked;
  
  if (isSqFt) {
    // $/SQ FT → $/MBF
    const priceMBF = priceInput * coverageFactor * 1000;
    document.getElementById('sqft-price-result-label').textContent = '$/MBF:';
    document.getElementById('sqft-price-result-value').textContent = 
      '$' + priceMBF.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
  } else {
    // $/MBF → $/SQ FT
    const priceSqFt = priceInput / 1000 / coverageFactor;
    document.getElementById('sqft-price-result-label').textContent = '$/SQ FT:';
    document.getElementById('sqft-price-result-value').textContent = '$' + priceSqFt.toFixed(3);
  }
}

function calculate() {
  const resultSection = document.getElementById('resultSection');
  const resultLabel = document.getElementById('resultLabel');
  const resultValue = document.getElementById('resultValue');
  const displayNumber = document.getElementById('displayNumber');
  const displayUnit = document.getElementById('displayUnit');
  
  if (currentMode === 'lf-to-mbf') {
    const lf = parseFloat(document.getElementById('lf-input').value) || 0;
    const t = parseFloat(document.getElementById('lf-thick').value) || 1;
    const w = parseFloat(document.getElementById('lf-width').value) || 1;
    
    // MBF = LF * (T * W) / 12 / 1000
    const mbf = lf * (t * w) / 12 / 1000;
    
    displayNumber.textContent = mbf.toFixed(3);
    displayUnit.textContent = 'MBF';
    resultSection.style.display = 'none';
  }
  else if (currentMode === 'mbf-to-lf') {
    const mbf = parseFloat(document.getElementById('mbf-input').value) || 0;
    const t = parseFloat(document.getElementById('mbf-thick').value) || 1;
    const w = parseFloat(document.getElementById('mbf-width').value) || 1;
    
    // LF = MBF * 1000 * 12 / (T * W)
    const lf = mbf * 1000 * 12 / (t * w);
    
    displayNumber.textContent = lf.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
    displayUnit.textContent = 'LF';
    resultSection.style.display = 'none';
  }
  else if (currentMode === 'sq-ft') {
    const input = parseFloat(document.getElementById('sqft-input').value) || 0;
    const netFace = parseFloat(document.getElementById('sqft-face-width').value) || 1;
    const nominalWidth = parseFloat(document.getElementById('sqft-nominal-width').value) || 1;
    const isSqFt = document.getElementById('sqft-unit-toggle').checked;
    
    // CRITICAL: Coverage Factor = Net Face Width ÷ Nominal Width
    const coverageFactor = netFace / nominalWidth;
    
    if (isSqFt) {
      // Input is SQ FT → calculate MBF
      const mbf = input / coverageFactor / 1000;
      displayNumber.textContent = mbf.toFixed(3);
      displayUnit.textContent = 'MBF';
    } else {
      // Input is MBF → calculate SQ FT
      const sqFt = input * 1000 * coverageFactor;
      displayNumber.textContent = sqFt.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
      displayUnit.textContent = 'SQ FT';
    }
    
    // Calculate pricing
    calculateSqFtPricing(coverageFactor);
    resultSection.style.display = 'none';
  }
  else if (currentMode === 'mbf-m3') {
    // MBF to M³ conversion
    const priceInput = parseFloat(document.getElementById('m3-price-input').value) || 0;
    const isMBF = document.getElementById('m3-unit-toggle').checked;
    
    if (isMBF) {
      // Input is $/MBF → Show €/m³ in LCD (primary result)
      const priceMBFUSD = priceInput;
      const priceM3USD = priceInput / MBF_TO_M3;
      const priceM3EUR = priceM3USD * usdToEurRate;
      
      // Show €/m³ in big LCD display
      displayNumber.textContent = '€' + priceM3EUR.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
      displayUnit.textContent = '/m³';
      
      // Show $/m³ below in result section
      document.getElementById('m3-price-usd').textContent = '$' + priceM3USD.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + '/m³';
      document.getElementById('m3-price-eur').textContent = '€' + priceM3EUR.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + '/m³';
    } else {
      // Input is €/m³ → Show $/MBF in LCD (primary result)
      const priceM3EUR = priceInput;
      const priceM3USD = priceInput / usdToEurRate;
      const priceMBFUSD = priceM3USD * MBF_TO_M3;
      
      // Show $/MBF in big LCD display
      displayNumber.textContent = '$' + priceMBFUSD.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
      displayUnit.textContent = '/MBF';
      
      // Show both below in result section
      document.getElementById('m3-price-usd').textContent = '$' + priceM3USD.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + '/m³';
      document.getElementById('m3-price-eur').textContent = '€' + priceM3EUR.toLocaleString('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }) + '/m³';
    }
    
    resultSection.style.display = 'none';
  }
  else if (currentMode === 'pricing') {
    const priceInput = parseFloat(document.getElementById('price-input').value) || 0;
    const t = parseFloat(document.getElementById('price-thick').value) || 1;
    const w = parseFloat(document.getElementById('price-width').value) || 1;
    const isLF = document.getElementById('price-unit-toggle').checked;
    
    if (isLF) {
      // Input is $/LF → calculate $/MBF
      const calcMBF = priceInput * 12 / (t * w) * 1000;
      displayNumber.textContent = '$' + calcMBF.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
      displayUnit.textContent = '/MBF';
    } else {
      // Input is $/MBF → calculate $/LF
      const calcLF = priceInput / 1000 * (t * w) / 12;
      displayNumber.textContent = '$' + calcLF.toFixed(3);
      displayUnit.textContent = '/LF';
    }
    resultSection.style.display = 'none';
  }
}

// Initial calculation
calculate();

// Initialize exchange rate for MBF-M³ conversion
checkRateUpdate();
</script>

</body>
</html>
